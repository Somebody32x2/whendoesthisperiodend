import{s as S,o as he,n as se,b as re,f as ae}from"../chunks/scheduler.rao8-JGV.js";import{S as me,i as de,g as w,h as y,j as E,f as d,k as $,a as D,x as m,t as V,b as R,d as j,s as A,e as F,c as M,p as U,z as oe,r as ne,u as ie,v as fe,w as ue,m as b,n as k,o as pe}from"../chunks/index.EIsLXCri.js";import{s as q,D as ve,e as z,u as Q,f as ge,o as W,P as ce}from"../chunks/WS.0a57UPbK.js";function X(t,e,o){const r=t.slice();return r[13]=e[o][0],r[14]=e[o][1],r[15]=e,r[16]=o,r}function Y(t,e,o){const r=t.slice();return r[13]=e[o][0],r[14]=e[o][1],r[17]=e,r[16]=o,r}function be(t){let e,o=t[1],r,i,n,a,f=Z(t);function h(u){t[8](u,t[16])}let p={tween:!0,color:t[14].color,size:"xs",radius:"sm",striped:!0,animate:!0,class:"w-full py-2"};return t[2][t[16]]!==void 0&&(p.value=t[2][t[16]]),i=new ce({props:p}),re.push(()=>oe(i,"value",h)),{c(){e=w("div"),f.c(),r=A(),ne(i.$$.fragment),this.h()},l(u){e=y(u,"DIV",{class:!0});var c=E(e);f.l(c),r=M(c),ie(i.$$.fragment,c),c.forEach(d),this.h()},h(){$(e,"class",(t[16]!==1?"mt-2":"")+" px-2")},m(u,c){D(u,e,c),f.m(e,null),m(e,r),fe(i,e,null),a=!0},p(u,c){t=u,c&2&&S(o,o=t[1])?(f.d(1),f=Z(t),f.c(),f.m(e,r)):f.p(t,c);const l={};!n&&c&36&&(n=!0,l.value=t[2][t[16]],ae(()=>n=!1)),i.$set(l)},i(u){a||(j(i.$$.fragment,u),a=!0)},o(u){V(i.$$.fragment,u),a=!1},d(u){u&&d(e),f.d(u),ue(i)}}}function ke(t){let e,o,r,i=_e(t[14])+"",n,a,f=t[14].timeLeft.milliseconds>0?"left":"ago",h,p,u=(t[14].showEndpoints&&!t[0]?` | ${t[14].start.toFormat("h:mma")} - ${t[14].end.toFormat("h:mma")}`.replaceAll(" "," "):"")+"",c,l;return{c(){e=w("p"),o=b("("),r=w("b"),n=b(i),a=b(" "),h=b(f),p=w("b"),c=b(u),l=b(")"),this.h()},l(s){e=y(s,"P",{class:!0});var _=E(e);o=k(_,"("),r=y(_,"B",{});var v=E(r);n=k(v,i),v.forEach(d),a=k(_," "),h=k(_,f),p=y(_,"B",{});var g=E(p);c=k(g,u),g.forEach(d),l=k(_,")"),_.forEach(d),this.h()},h(){$(e,"class","text-lg ml-1 lg:ml-0 sm:text-xl lg:text-2xl ")},m(s,_){D(s,e,_),m(e,o),m(e,r),m(r,n),m(e,a),m(e,h),m(e,p),m(p,c),m(e,l)},p(s,_){_&1&&u!==(u=(s[14].showEndpoints&&!s[0]?` | ${s[14].start.toFormat("h:mma")} - ${s[14].end.toFormat("h:mma")}`.replaceAll(" "," "):"")+"")&&pe(c,u)},d(s){s&&d(e)}}}function Z(t){let e,o,r,i=t[14].percentDone.toFixed(t[7](t[14]))+"",n,a,f=t[14].label+"",h,p,u=t[13]!="year"&&ke(t);return{c(){e=w("div"),o=w("p"),r=w("b"),n=b(i),a=b(`%
                                    done
                                    with `),h=b(f),p=A(),u&&u.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var l=E(e);o=y(l,"P",{class:!0});var s=E(o);r=y(s,"B",{class:!0});var _=E(r);n=k(_,i),_.forEach(d),a=k(s,`%
                                    done
                                    with `),h=k(s,f),s.forEach(d),p=M(l),u&&u.l(l),l.forEach(d),this.h()},h(){$(r,"class","text-lg sm:text-xl lg:text-2xl"),$(o,"class","lg:mx-2"),$(e,"class","text-md sm:text-xl lg:text-2xl flex lg:flex-row justify-center")},m(c,l){D(c,e,l),m(e,o),m(o,r),m(r,n),m(o,a),m(o,h),m(e,p),u&&u.m(e,null)},p(c,l){c[13]!="year"&&u.p(c,l)},d(c){c&&d(e),u&&u.d()}}}function x(t,e){let o,r,i,n=!!e[14]&&e[14].start&&e[14].end&&e[14].timeLeft.isValid&&be(e);return{key:t,first:null,c(){o=F(),n&&n.c(),r=F(),this.h()},l(a){o=F(),n&&n.l(a),r=F(),this.h()},h(){this.first=o},m(a,f){D(a,o,f),n&&n.m(a,f),D(a,r,f),i=!0},p(a,f){e=a,e[14]&&e[14].start&&e[14].end&&e[14].timeLeft.isValid&&n.p(e,f)},i(a){i||(j(n),i=!0)},o(a){V(n),i=!1},d(a){a&&(d(o),d(r)),n&&n.d(a)}}}function we(t){let e,o=t[1],r,i,n,a,f,h=ee(t);function p(c){t[9](c,t[16])}let u={tween:!0,color:t[14].color,size:"xs",radius:"sm",striped:!0,animate:!0,class:"w-full py-2"};return t[3][t[16]]!==void 0&&(u.value=t[3][t[16]]),i=new ce({props:u}),re.push(()=>oe(i,"value",p)),{c(){e=w("div"),h.c(),r=A(),ne(i.$$.fragment),a=A(),this.h()},l(c){e=y(c,"DIV",{class:!0});var l=E(e);h.l(l),r=M(l),ie(i.$$.fragment,l),a=M(l),l.forEach(d),this.h()},h(){$(e,"class","mt-10 px-2")},m(c,l){D(c,e,l),h.m(e,null),m(e,r),fe(i,e,null),m(e,a),f=!0},p(c,l){t=c,l&2&&S(o,o=t[1])?(h.d(1),h=ee(t),h.c(),h.m(e,r)):h.p(t,l);const s={};!n&&l&72&&(n=!0,s.value=t[3][t[16]],ae(()=>n=!1)),i.$set(s)},i(c){f||(j(i.$$.fragment,c),f=!0)},o(c){V(i.$$.fragment,c),f=!1},d(c){c&&d(e),h.d(c),ue(i)}}}function ee(t){let e,o,r,i=t[14].percentDone.toFixed(t[7](t[14]))+"",n,a,f=t[14].label+"",h,p,u,c,l,s=_e(t[14])+"",_,v,g=t[14].timeLeft.milliseconds>0?"left":"ago",T,I,G=(t[14].showEndpoints?` | ${t[14].start.toFormat("h:mma")} - ${t[14].end.toFormat("h:mma")}`.replaceAll(" "," "):"")+"",C,N;return{c(){e=w("div"),o=w("p"),r=w("b"),n=b(i),a=b(`%
                                    done
                                    with `),h=b(f),p=A(),u=w("p"),c=b("("),l=w("b"),_=b(s),v=b(" "),T=b(g),I=w("b"),C=b(G),N=b(")"),this.h()},l(P){e=y(P,"DIV",{class:!0});var L=E(e);o=y(L,"P",{class:!0});var O=E(o);r=y(O,"B",{class:!0});var H=E(r);n=k(H,i),H.forEach(d),a=k(O,`%
                                    done
                                    with `),h=k(O,f),O.forEach(d),p=M(L),u=y(L,"P",{class:!0});var B=E(u);c=k(B,"("),l=y(B,"B",{});var J=E(l);_=k(J,s),J.forEach(d),v=k(B," "),T=k(B,g),I=y(B,"B",{});var K=E(I);C=k(K,G),K.forEach(d),N=k(B,")"),B.forEach(d),L.forEach(d),this.h()},h(){$(r,"class","text-lg sm:text-xl lg:text-2xl"),$(o,"class","lg:mx-2"),$(u,"class","text-lg sm:text-xl lg:text-2xl"),$(e,"class","text-md sm:text-xl lg:text-2xl flex flex-col lg:flex-row justify-center")},m(P,L){D(P,e,L),m(e,o),m(o,r),m(r,n),m(o,a),m(o,h),m(e,p),m(e,u),m(u,c),m(u,l),m(l,_),m(u,v),m(u,T),m(u,I),m(I,C),m(u,N)},p:se,d(P){P&&d(e)}}}function te(t,e){let o,r,i,n=!!e[14]&&we(e);return{key:t,first:null,c(){o=F(),n&&n.c(),r=F(),this.h()},l(a){o=F(),n&&n.l(a),r=F(),this.h()},h(){this.first=o},m(a,f){D(a,o,f),n&&n.m(a,f),D(a,r,f),i=!0},p(a,f){e=a,e[14]&&n.p(e,f)},i(a){i||(j(n),i=!0)},o(a){V(n),i=!1},d(a){a&&(d(o),d(r)),n&&n.d(a)}}}function le(t){let e=[],o=new Map,r,i=[],n=new Map,a,f,h=z(Object.entries(t[5].bars));const p=l=>l[13];for(let l=0;l<h.length;l+=1){let s=Y(t,h,l),_=p(s);o.set(_,e[l]=x(_,s))}let u=z(Object.entries(t[6]));const c=l=>l[13];for(let l=0;l<u.length;l+=1){let s=X(t,u,l),_=c(s);n.set(_,i[l]=te(_,s))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();r=A();for(let l=0;l<i.length;l+=1)i[l].c();a=F()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);r=M(l);for(let s=0;s<i.length;s+=1)i[s].l(l);a=F()},m(l,s){for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(l,s);D(l,r,s);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(l,s);D(l,a,s),f=!0},p(l,s){s&167&&(h=z(Object.entries(l[5].bars)),U(),e=Q(e,s,p,1,l,h,o,r.parentNode,W,x,r,Y),R()),s&202&&(u=z(Object.entries(l[6])),U(),i=Q(i,s,c,1,l,u,n,a.parentNode,W,te,a,X),R())},i(l){if(!f){for(let s=0;s<h.length;s+=1)j(e[s]);for(let s=0;s<u.length;s+=1)j(i[s]);f=!0}},o(l){for(let s=0;s<e.length;s+=1)V(e[s]);for(let s=0;s<i.length;s+=1)V(i[s]);f=!1},d(l){l&&(d(r),d(a));for(let s=0;s<e.length;s+=1)e[s].d(l);for(let s=0;s<i.length;s+=1)i[s].d(l)}}}function ye(t){let e,o,r=t[4],i,n=le(t);return{c(){e=w("div"),o=w("div"),n.c(),this.h()},l(a){e=y(a,"DIV",{class:!0});var f=E(e);o=y(f,"DIV",{class:!0});var h=E(o);n.l(h),h.forEach(d),f.forEach(d),this.h()},h(){$(o,"class","w-[95%] md:w-[75%] text-center"),$(e,"class","w-full min-h-[100vh] flex items-center justify-center flex-col dark:bg-gray-800 dark:text-white relative")},m(a,f){D(a,e,f),m(e,o),n.m(o,null),i=!0},p(a,[f]){f&16&&S(r,r=a[4])?(U(),V(n,1,1,se),R(),n=le(a),n.c(),j(n,1),n.m(o,null)):n.p(a,f)},i(a){i||(j(n),i=!0)},o(a){V(n),i=!1},d(a){a&&d(e),n.d(a)}}}function _e(t){return t.timeLeft.toFormat(`${+t.timeLeft.toFormat("d")>0?`d' day${+t.timeLeft.toFormat("d")!=1?"s":""}, '`:""}hh:mm:ss`).replaceAll(" "," ").replaceAll("-","")}function Ee(t,e,o){let r=ge,i=0,n=new Array(q.length).fill(0),a={},f=new Array().fill(0),{mini_viewer:h=!0}=e,p=-1;function u(v){return Math.floor(Math.log10(v.end.toMillis()-v.start.toMillis())-3)+p}let c=[],l=0;he(()=>{o(1,i++,i),ve.now(),setInterval(()=>{r.update();for(let g=0;g<q.length;g++)r.bars[q[g]]&&o(2,n[g]=r.bars[q[g]]?.percentDone,n);let v=Object.keys(r.bars).filter(g=>r.bars[g]!==void 0);(v.some(g=>!c.includes(g))||v.length!==c.length)&&(console.log({bars:v,lastBars:c,fullUpdateRequest:l}),c=v,o(4,l++,l)),o(1,i++,i)},123)});function s(v,g){t.$$.not_equal(n[g],v)&&(n[g]=v,o(2,n))}function _(v,g){t.$$.not_equal(f[g],v)&&(f[g]=v,o(3,f))}return t.$$set=v=>{"mini_viewer"in v&&o(0,h=v.mini_viewer)},[h,i,n,f,l,r,a,u,s,_]}class Ve extends me{constructor(e){super(),de(this,e,Ee,ye,S,{mini_viewer:0})}}export{Ve as component};
